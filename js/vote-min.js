!function(e){function t(t){var o=e(".vote_nav_li_sel"),n=t,a=n.parent().attr("href");o!==n&&(o.removeClass("vote_nav_li_sel"),n.addClass("vote_nav_li_sel"),e(".vote_container").addClass("vote_container_hide"),e(a).removeClass("vote_container_hide"))}function o(t,o,n){e(".norm_suc_h").html(t),e(".norm_suc_p").html(o),e(".norm_suc").css({display:"block"})}e(document).ready(function(){e(".vote_form").each(function(){var t=e(this),o=t.data("voted");o&&(t.find(".vote_v").each(function(){for(var t=e(this).next(),n=o.length,a=0;n>a;a++)if(t.val()==o[a]){e(this).addClass("vote_ved").html("&#xe660;").css({fontSize:"30px",lineHeight:"38px"});break}}),t.find(".vote_sub").addClass("vote_subed").val("已投票"))});var o=document.location.hash;if(o){var n=e("[href*="+o+"]").children();n.addClass("vote_nav_li_sel"),t(n)}}),e(".vote_nav_li").on("click",function(){t(e(this))}),e(".norm_suc_sub").click(function(){e(".norm_suc").css({display:"none"})});var n=e(".vote_v");n.on("click",function(){var t=e(this),o=t.next();return t.parents("form").data("voted")?!1:void(o.prop("checked")?(t.css({color:"#c3a1a7",fontSize:"24px"}).html("&#xe651;"),o.prop("checked",!1)):(t.css({color:"#ff9125",fontSize:"30px"}).html("&#xe660;"),o.prop("checked",!0)))});var a=!1;e(".vote_form").on("submit",function(){function t(){if(!l){var e=c.val();e.length<13?c.val(e+"."):c.val("正在奋力帮您投票."),setTimeout(t,500)}}if(a)return!1;var n,s=e(this),i=[],v={};if(s.data("voted"))return!1;s.find(".vote_v_in").each(function(){var t=e(this);t.prop("checked")&&i.push(t.val())});var r=i.length;if(0===r)return o("出错啦","请先选择候选人再投票"),!1;if(!(r>6&&11>r))return o("出错啦","每次只能投给7-10位候选人哦"),!1;a=!0,n=s.find(".vote_v_in").prop("name"),"nor"===n?v.type=1:v.type=2,v.data=i,v._token=_token,console.log(typeof v,v);var c=s.find(".vote_sub"),l=!1;return c.addClass("vote_subed").val("正在奋力帮您投票."),setTimeout(t,500),e.ajax({type:"POST",url:url,data:v,dataType:"json",success:function(t){var n=t,v=n.status,r=n.info;403===v?(c.removeClass("vote_subed").val("投票"),o("出错啦",r)):(s.data("voted",i),c.val("已投票"),s.find(".vote_v").each(function(){for(var t=e(this).next(),o=i.length,n=0;o>n;n++)if(t.val()==i[n]){e(this).addClass("vote_ved").html("&#xe660;").css({fontSize:"30px",lineHeight:"38px"});break}}),o("投票成功！","您已经成功投票")),l=!0,a=!1},error:function(){c.removeClass("vote_subed").val("投票"),o("出错啦","请检查您的网络再重试"),l=!0,a=!1}}),!1})}(jQuery);